<!DOCTYPE html>
<html lang="en">
<head>
  <title>FNF Finder</title>
  <link rel="stylesheet" type="text/css" href="/style.css">
  
  <!-- <script type="module" type="text/javascript" src="/finder.js"></script> -->
  <script type="text/javascript" src="/handler.js"></script>
  <script>
// const handleResponse = async (response) => {
      
//       //Grab the content section
//       const content = document.querySelector('#content');

//       let globalJSON;

//       //Based on the status code, display something
//       switch(response.status) {
//         case 200: //success
//           content.innerHTML = `<b>Success</b>`;
//           break;
//         case 201: //created
//           content.innerHTML = '<b>Created</b>';
//           break;
//         case 204: //updated (no response back from server)
//           content.innerHTML = '<b>Updated (No Content)</b>';
//           return;
//         case 400: //bad request
//           content.innerHTML = `<b>Bad Request</b>`;
//           break;
//         default: //any other status code
//           content.innerHTML = `Error code not implemented by client.`;
//           break;
//       }

//       //Parse the response to json. This works because we know the server always
//       //sends back json. Await because .json() is an async function.
//       let obj = await response.json();
      
//       //If we have a message, display it.
//       if(obj.message){
//         content.innerHTML += `<p>${obj.message}</p>`;
//       }
//     };

//     //Uses fetch to send a postRequest. Marksed as async because we use await
//     //within it.
//     const sendPost = async (nameForm) => {
//       //Grab all the info from the form
//       const nameAction = nameForm.getAttribute('action');
//       const nameMethod = nameForm.getAttribute('method');
      
//       const nameField = nameForm.querySelector('#nameField');
//       const ageField = nameForm.querySelector('#ageField');

//       //Build a data string in the FORM-URLENCODED format.
//       const formData = `name=${nameField.value}&age=${ageField.value}`;

//       //Make a fetch request and await a response. Set the method to
//       //the one provided by the form (POST). Set the headers. Content-Type
//       //is the type of data we are sending. Accept is the data we would like
//       //in response. Then add our FORM-URLENCODED string as the body of the request.
//       let response = await fetch(nameAction, {
//         method: nameMethod,
//         headers: {
//           'Content-Type': 'application/x-www-form-urlencoded',
//           'Accept': 'application/json',
//         },
//         body: formData,
//       });

//       //Once we have a response, handle it.
//       handleResponse(response);
//     };

//     //Init function is called when window.onload runs (set below).
//     const init = () => {
//       //Grab the form
//       const nameForm = document.querySelector('#nameForm');

//       const searchBox = document.querySelector('#characterField');
      
//       //Create an addUser function that cancels the forms default action and
//       //calls our sendPost function above.
//       const addUser = (e) => {
//         e.preventDefault();
//         sendPost(nameForm);
//         return false;
//       }
      
//       //Call addUser when the submit event fires on the form.
//       // nameForm.addEventListener('submit', addUser);

//       searchBox.addEventListener('input', async () => {
//       // if searchBox.value includes a space, it will automatically put in a '%20' in between
//         const response = await fetch(`/getCharacters?name=${searchBox.value}`);

//         // This is where the Unexpected end of JSON input error happens
//         const obj = await response.json();

//         // This is so I can get the info from the parsed JSON
//         globalJSON = obj;

//         const val = Object.values(obj).sort(function(a, b) {
//           return compareStrings(a.name, b.name);
//         });

//         content.innerHTML = '';
//         // Object.values(obj).forEach(char => {
//         val.forEach(char => {
//           console.log(char);
//             let altName = '';
//             if(char.alt != null) altName = char.alt;
//             else altName = char.name;
//             content.innerHTML += `<div id="${char.name}" style="margin: 5px;">
//             <button id="${char.name}Button" class="character" origin="${char.origin}" mod="${char.mod}" icon="${char.icon}" style="background: rgba(0,0,0,0); border: none; cursor: pointer;">
//             <img src="${char.imageURL}" alt="${char.name}" height="150px" style="object-fit: contain;" id="${char.name}Img"></img>
//             </button>
//             <p style="margin: 1px;">${altName}</p>
//             </div>`;
//         });
//         // for(let k of obj)
//         // {
//         //   console.log(obj[k]);
//         // }
//       });
//     };

//     //When the window loads, run init.
//     window.onload = init;

//     function compareStrings(a, b) {
//     // Assuming you want case-insensitive comparison
//     a = a.toLowerCase();
//     b = b.toLowerCase();
  
//     return (a < b) ? -1 : (a > b) ? 1 : 0;
// };
  </script>
</head>
<body>
  <form action="/login.html" id="signIn">
    <input type="submit" value="Login">
  </form>
  <form action="/login.html" id="signOut">
    <input type="submit" value="Sign Out">
  </form>
  <br>
  <section id="top">
    <h3>Friday Night Finder</h3>
    <div id="inputField">
      <form id="characterForm" action="characters" method="post">
        <label for="name">Character: </label>
        <input id="characterField" type="search" name="name" />
      </form>
      <!-- This will be used for when I implement the wiki stuff-->
      <!-- <form id="modsForm" action="mods" method="post">
        <label for="name">Mod: </label>
        <input id="modsField" type="search" name="name" />
      </form> -->
    </div>
  </section>
  <section id="content">
    <h4>Use the search box to look up a character</h4>
  </section>
  <section id="infobox">
    <img src="https://static.wikia.nocookie.net/fridaynightfunking/images/a/a8/MajinSonic3.0IdleAnim.gif" alt="sample" height="500" id="baseImg">
    <div id="info">
      <h1 id="name">XXXXXX</h1>
      <h2>Origin: <span id="origin">XXXXXX</span></h2>
      <h2>Mod: <span id="mod">XXXXXX</span></h2>
      <img src="https://static.wikia.nocookie.net/fridaynightfunking/images/d/db/Icon-Majin-OG.png" alt="icon" id="icons">
    </div>
  </section>
</body>
</html>
